class imageValidator{constructor(i){this.setDefaults(i)}setDefaults(i){var e={image:{},mimeTypes:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/gif","image/jpeg","image/png","image/webp","application/pdf","image/svg+xml","application/epub+zip"],extensions:["doc","docx","png","jpg","jpeg","gif","pdf","svg","webp","epub"],sizeAllowed:5e7,sizeNameAllowed:255,isFrontendValid:!1,isBackendValid:!1,isImageValid:!1,isRunning:!1,isDone:!1,closeModal:!0,ajaxUrl:"",extraParams:{},swalValidationTitle:"File Validation",swalValidationMessage:"Please wait a moment while your file is validated.",completed:function(){},progress:function(){},success:function(){},error:function(){}},a=this;0==$.isEmptyObject(e)&&$.each(e,function(i,e){a[""+i]=e}),0==$.isEmptyObject(i)&&$.each(i,function(i,e){a[i]=e})}run(){this.isRunning=!0,this.__progressCallBack(),this.__validateImage()}isValidatorDone(){return this.isRunning||(this.isDone=!0),this.isDone&&this.isFrontendValid&&this.isBackendValid&&(this.isImageValid=!0),this.isDone}done(){return this.isRunning=!1,this.isValidatorDone(),this.isDone=!1,this.isFrontendValid=!1,this.isBackendValid=!1,this.isImageValid?this.__completedCallBack():this.__errorCallBack(),this.isImageValid}setExtraParams(i){this.extraParams=i}__validateMimeTypes(){$.inArray(this.image.type,this.mimeTypes)>-1?this.isFrontendValid=!0:this.isFrontendValid=!1}__validateExtensions(){var i=this.image.name.split(".").pop();i=i.toLowerCase(),$.inArray(i,this.extensions)>-1?this.isFrontendValid=!0:this.isFrontendValid=!1}__validateSize(){this.image.size<=this.sizeAllowed?this.isFrontendValid=!0:this.isFrontendValid=!1}__validateFileName(){var i=!1,e=this;$.each([".php",".html",".css",".phar",".ssh"],function(a,s){e.image.name.indexOf(s)>-1&&(i=!0)}),this.image.name.length>0&&this.image.name.length<=this.sizeNameAllowed&&!1===i?this.isFrontendValid=!0:this.isFrontendValid=!1}__progressCallBack(){this.progress()}__succesCallBack(){this.success()}__errorCallBack(){this.error()}__completedCallBack(){this.completed()}__validateImage(){this.__validateImageInFrontEnd(),this.isFrontendValid?this.__validateImageInBackEnd():this.done()}__setSettings(){var i={};return i.mimeTypes=this.mimeTypes,i.extensions=this.extensions,i.sizeAllowed=this.sizeAllowed,i.sizeNameAllowed=this.sizeNameAllowed,i}__validateImageInBackEnd(){var i=this;swal({showCancelButton:!1,showConfirmButton:!1,closeOnConfirm:!0,allowOutsideClick:!1,allowEscapeKey:!1,imageUrl:"//www.securemypayment.com/directory/cdn/images/bars-loading.gif",title:i.swalValidationTitle,text:i.swalValidationMessage});var e={};(e=this.__setSettings()).widget_name="Admin - Bootstrap Theme - Function - Image Validation",e.request_type="POST",e.header_type="json",e.imageFile=this.image;var a=new FormData;0==$.isEmptyObject(this.extraParams)&&$.each(this.extraParams,function(i,a){e[i]=a}),0==$.isEmptyObject(e)&&$.each(e,function(i,e){a.append(i,e)}),$.ajax({url:this.ajaxUrl,type:"POST",dataType:"json",data:a,cache:!1,contentType:!1,processData:!1,success:function(e){i.closeModal&&("function"==typeof swal.closeModal?swal.closeModal():"function"==typeof swal.close&&swal.close()),1==e.status?i.isBackendValid=!0:i.isBackendValid=!1,i.done()&&i.__succesCallBack()}})}__validateImageInFrontEnd(){this.__validateMimeTypes();var i=this.isFrontendValid;this.__validateExtensions();var e=this.isFrontendValid;this.__validateSize();var a=this.isFrontendValid;this.__validateFileName();var s=this.isFrontendValid;this.isFrontendValid=!!(i&&e&&a&&s)}}